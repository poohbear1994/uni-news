(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/list/list"],{"037d":function(t,e,n){},"2bee":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement;t._self._c},i=[]},b34d:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("a34a")),r=n("9305");function i(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e,n,a,r,i,c){try{var o=t[i](c),u=o.value}catch(s){return void n(s)}o.done?e(u):Promise.resolve(u).then(a,r)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function c(t){s(i,a,r,c,o,"next",t)}function o(t){s(i,a,r,c,o,"throw",t)}c(void 0)}))}}var f=function(){n.e("components/list/list-item").then(function(){return resolve(n("ddce"))}.bind(null,n)).catch(n.oe)},l=new r.IndexModel,p={name:"list",components:{listItem:f},props:{tab:{type:Array,default:function(){return[]}},activeIndex:{type:Number,default:function(){return 0}},types:{type:String,default:""}},data:function(){return{currentIndex:0,listCacheData:{},pageSize:5,loading:{}}},computed:{list:{get:function(){return this.listCacheData},set:function(){}}},watch:{tab:function(){this.listCacheData={},this.loading={},this.initializeData()}},methods:{change:function(t){var e=this;return d(a.default.mark((function n(){var r,i,c,o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.detail.current,e.$emit("change",r),e.isCaching(r)){n.next=11;break}return i=e.getCategory(r),c=1,n.next=7,e.getListData({category:i,page:c,pageSize:e.pageSize});case 7:o=n.sent,e.setList(o),e.setListCacheData({data:o,page:c,index:r}),e.setLoading(r,"more");case 11:case"end":return n.stop()}}),n)})))()},getListData:function(){var t=arguments;return d(a.default.mark((function e(){var n,r,i;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{category:"全部",page:1,pageSize:5},e.next=3,l.getList(n);case 3:return r=e.sent,i=r.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))()},setList:function(t){this.list=t},getCategory:function(t){return this.tab[t].name},setListCacheData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:0,data:[],page:1,loadingStatus:"more"},e=t.index,n=t.data,a=t.page;this.$set(this.listCacheData,e,{data:n,loadedPage:a})},getListforCacheData:function(t){return this.listCacheData[t]},isCaching:function(t){return this.listCacheData.hasOwnProperty(t)},loadmore:function(){var t=this;return d(a.default.mark((function e(){var n,r,i,c;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("noMore"!==t.loading[t.activeIndex]){e.next=3;break}return t.setLoading(t.activeIndex,"noMore"),e.abrupt("return");case 3:return n=t.getListforCacheData(t.activeIndex),r=n.loadedPage+1,i=t.getCategory(t.activeIndex),e.next=8,t.getListData({category:i,page:r,pageSize:t.pageSize});case 8:c=e.sent,c.length?(t.setListCacheData({index:t.activeIndex,data:n.data.concat(c),page:r}),t.setLoading(t.activeIndex,"more")):t.setLoading(t.activeIndex,"noMore");case 10:case"end":return e.stop()}}),e)})))()},setLoading:function(t,e){this.$set(this.loading,t,e)},initializeData:function(){var t=this;return d(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getListData({category:"全部"});case 2:n=e.sent,t.setListCacheData({index:0,data:n,page:1}),t.setLoading(t.activeIndex,"more");case 5:case"end":return e.stop()}}),e)})))()},updateLikeStatus:function(t){console.log(t);var e=[];for(var n in this.listCacheData)e.push(this.listCacheData[n]);var a=t._id;for(var r in e)for(var i in e[r].data)e[r].data[i]._id===a&&(e[r].data[i].is_like=t.is_like);this.listCacheData=o({},e)}},created:function(){var e=this;t.$on("update_article",(function(t){var n=t.item;t.type;e.updateLikeStatus(n)}))}};e.default=p}).call(this,n("543d")["default"])},bf82:function(t,e,n){"use strict";var a=n("037d"),r=n.n(a);r.a},cbbc:function(t,e,n){"use strict";n.r(e);var a=n("b34d"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=r.a},e9d1:function(t,e,n){"use strict";n.r(e);var a=n("2bee"),r=n("cbbc");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("bf82");var c,o=n("f0c5"),u=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"1faf4933",null,!1,a["a"],c);e["default"]=u.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/list/list-create-component',
    {
        'components/list/list-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("e9d1"))
        })
    },
    [['components/list/list-create-component']]
]);
