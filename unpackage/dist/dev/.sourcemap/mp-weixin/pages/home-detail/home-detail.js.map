{"version":3,"sources":["uni-app:///main.js","webpack:////Users/lujianxin/Desktop/前端学习/uni-app/uni-news/pages/home-detail/home-detail.vue?ac19","webpack:////Users/lujianxin/Desktop/前端学习/uni-app/uni-news/pages/home-detail/home-detail.vue?d8b9","webpack:////Users/lujianxin/Desktop/前端学习/uni-app/uni-news/pages/home-detail/home-detail.vue?539f","webpack:////Users/lujianxin/Desktop/前端学习/uni-app/uni-news/pages/home-detail/home-detail.vue?e9aa","uni-app:///pages/home-detail/home-detail.vue","webpack:////Users/lujianxin/Desktop/前端学习/uni-app/uni-news/pages/home-detail/home-detail.vue?601a","webpack:////Users/lujianxin/Desktop/前端学习/uni-app/uni-news/pages/home-detail/home-detail.vue?308f"],"names":["createPage","Page"],"mappings":"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","file":"pages/home-detail/home-detail.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/home-detail/home-detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./home-detail.vue?vue&type=template&id=2d304a06&\"\nvar renderjs\nimport script from \"./home-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./home-detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home-detail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/home-detail/home-detail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home-detail.vue?vue&type=template&id=2d304a06&\"","var components\ntry {\n  components = {\n    commentBox: function() {\n      return import(\n        /* webpackChunkName: \"components/comment-box/comment-box\" */ \"@/components/comment-box/comment-box.vue\"\n      )\n    },\n    uniIcons: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    commentPopup: function() {\n      return import(\n        /* webpackChunkName: \"components/comment-popup/comment-popup\" */ \"@/components/comment-popup/comment-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home-detail.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"detail\">\n\t\t<view class=\"detail-title\">\n\t\t\t{{detailData.title}}\n\t\t</view>\n\t\t<view class=\"detail-header\">\n\t\t\t<view class=\"detail-header__logo\">\n\t\t\t\t<image :src=\"detailData.author.avatar\" mode=\"aspectFill\"></image>\n\t\t\t</view>\n\t\t\t<view class=\"detail-header__content\">\n\t\t\t\t<view class=\"detail-header__content-title\">\n\t\t\t\t\t{{detailData.author.author_name}}\n\t\t\t\t</view>\n\t\t\t\t<view class=\"detail-header__content-info\">\n\t\t\t\t\t<text>{{detailData.create_time}}</text>\n\t\t\t\t\t<text>{{detailData.browse_count}} 浏览</text>\n\t\t\t\t\t<text>{{detailData.thumbs_up_count}} 赞</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<button class=\"detail-header__button\" type=\"default\" @click=\"follow(detailData.author.id)\">{{detailData.is_author_like?'取消关注':'关注'}}</button>\n\t\t</view>\n\t\t<!-- 内容区 -->\n\t\t<view class=\"detail-content\">\n\t\t\t<view class=\"detail-html\">\n\t\t\t\t<u-parse :content=\"detailData.content\" :noData=\"noData\">\t\n\t\t\t\t\t{{detailData.content}}\n\t\t\t\t</u-parse>\n\t\t\t</view>\n\t\t\t<!-- 评论区 -->\n\t\t\t<view class=\"detail-comment\">\n\t\t\t\t<view class=\"comment-title\">最新评论</view>\n\t\t\t\t<view v-if=\"commentsList.length > 0\">\t\t\n\t\t\t\t\t<view class=\"comment-content\" v-for=\"item in commentsList\" :key=\"item.comment_id\">\n\t\t\t\t\t\t<comment-box :comment=\"item\" @reply=\"reply\"></comment-box>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view v-else class=\"comment-no__content\">\n\t\t\t\t\t暂无评论\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 底部栏 -->\n\t\t<view class=\"detail-bottom\">\n\t\t\t<view class=\"detail-bottom__input\" @click=\"openPopup('comment')\">\n\t\t\t\t<text>谈谈你的看法</text>\n\t\t\t\t<uni-icons type=\"compose\" size=\"16\" color=\"#F07373\"></uni-icons>\n\t\t\t</view>\n\t\t\t<view class=\"detail-bottom__icons\">\n\t\t\t\t<view class=\"detail-bottom__icons-box\">\n\t\t\t\t\t<uni-icons type=\"chat\" size=\"22\" color=\"#F07373\" @click=\"jumpToDetailComments\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"detail-bottom__icons-box\">\n\t\t\t\t\t<uni-icons :type=\"detailData.is_like ? 'heart-filled' : 'heart'\" size=\"22\" color=\"#F07373\" @click=\"likeTap\" ></uni-icons>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"detail-bottom__icons-box\">\n\t\t\t\t\t<uni-icons :type=\"detailData.is_thumbs_up? 'hand-thumbsup-filled':'hand-thumbsup' \" size=\"22\" color=\"#F07373\" @click=\"thumbsUp(detailData._id)\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 弹出层 -->\n\t\t<comment-popup :popupSwitch=\"popupSwitch\"  @submit=\"submit\"></comment-popup>\n\t</view>\n</template>\n\n<script>\n\timport uParse from '@/components/gaoyia-parse/parse.vue'\n\timport {\n\t\tIndexModel\n\t} from '../../models/index.js'\n\tconst indexModel = new IndexModel()\n\t\n\texport default {\n\t\tcomponents:{\n\t\t\tuParse\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tdetailData: {},\n\t\t\t\tnoData:'<p style=\"text-align:center; color:#666\">详情加载中...</p>',\n\t\t\t\t// 评论数据\n\t\t\t\tcommentsList:[],\n\t\t\t\t// 回复的评论\n\t\t\t\tcommentOfReply:{},\n\t\t\t\t// 当前的模式是评论还是回复\n\t\t\t\tcurrentMode:'comment',\n\t\t\t\t// 当前是否是子回复\n\t\t\t\tisSubReply: false,\n\t\t\t\t// 弹出层开关\n\t\t\t\tpopupSwitch: 0,\n\t\t\t};\n\t\t},\n\t\tmethods:{\n\t\t\t// 发布评论/回复\n\t\t\tasync submit(textareaVal,finishCallback) {\n\t\t\t\tuni.showLoading()\n\t\t\t\tlet data = null\n\t\t\t\tif(this.currentMode === 'comment'){\t\n\t\t\t\t\tdata = this.setPostCommentData(textareaVal)\n\t\t\t\t}else if(this.currentMode === 'reply'){\n\t\t\t\t\tconst currentComment = this.getCommentOfReply()\n\t\t\t\t\tdata = this.setPostReplyData(currentComment, textareaVal)\n\t\t\t\t}\n\t\t\t\tconst res = await indexModel.updateComment(data)\n\t\t\t\tuni.hideLoading()\n\t\t\t\tthis.setIsSubReply(false)\n\t\t\t\t// 返回结果\n\t\t\t\tif(res.code === 200){\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:this.currentMode === 'comment'?'评论成功':'回复成功',\n\t\t\t\t\t\ticon:'success'\n\t\t\t\t\t})\n\t\t\t\t\tfinishCallback()\n\t\t\t\t\treturn\n\t\t\t\t}else{\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:'请检查网络',\n\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 设置上传的评论数据\n\t\t\tsetPostCommentData(textareaVal) {\n\t\t\t\tconst comment = textareaVal\n\t\t\t\tconst article_id = this.detailData._id\n\t\t\t\treturn {\n\t\t\t\t\tarticle_id,\n\t\t\t\t\tcontent: comment\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 回复评论\n\t\t\treply(params){\n\t\t\t\tthis.openComment('reply')\n\t\t\t\tthis.setCommentOfReply(params.comment)\n\t\t\t\tif(params.comment.reply_id){\n\t\t\t\t\tthis.setIsSubReply(true)\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 设置回复哪条评论\n\t\t\tsetCommentOfReply(comment){\n\t\t\t\tthis.commentOfReply = comment\n\t\t\t},\n\t\t\t\n\t\t\t// 获取回复哪条评论\n\t\t\tgetCommentOfReply(){\n\t\t\t\treturn this.commentOfReply\n\t\t\t},\n\t\t\t\n\t\t\t// 设置是否回复回复\n\t\t\tsetIsSubReply(bool){\n\t\t\t\tthis.isSubReply = bool\n\t\t\t},\n\t\t\t\n\t\t\t// 处理需要上传的回复评论数据\n\t\t\tsetPostReplyData(comment, textareaVal){\n\t\t\t\tconst replyData = {\n\t\t\t\t\tarticle_id: this.detailData._id,\n\t\t\t\t\tcomment_id: comment.comment_id,\n\t\t\t\t\tcontent: textareaVal\n\t\t\t\t}\n\t\t\t\tif(this.isSubReply){\n\t\t\t\t\treplyData.reply_id = comment.reply_id\n\t\t\t\t\treplyData.is_subReply = this.isSubReply\n\t\t\t\t}\n\t\t\t\t return replyData\n\t\t\t},\n\t\t\t\n\t\t\t// 关注 / 取消关注\n\t\t\tasync follow(author_id){\n\t\t\t\tlet followState = this.isFollow()\n\t\t\t\tuni.showLoading()\n\t\t\t\tconst res = await indexModel.updateAuthor({\n\t\t\t\t\tauthor_id\n\t\t\t\t})\n\t\t\t\tuni.hideLoading()\n\t\t\t\tif(res.code === 200){\n\t\t\t\t\tuni.$emit('update_author')\n\t\t\t\t\twx.showToast({\n\t\t\t\t\t\ttitle: followState ? '已取消关注' : '关注成功',\n\t\t\t\t\t\ticon: followState ? 'none' : 'success'\n\t\t\t\t\t})\n\t\t\t\t\tthis.changeFollowState()\n\t\t\t\t\tfollowState = this.isFollow()\n\t\t\t\t}else{\n\t\t\t\t\twx.showToast({\n\t\t\t\t\t\ttitle:'网络不好，稍后重试',\n\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 是否关注当前作者\n\t\t\tisFollow(){\n\t\t\t\treturn this.detailData.is_author_like\n\t\t\t},\n\t\t\t\n\t\t\t// 切换关注状态\n\t\t\tchangeFollowState(){\n\t\t\t\tthis.detailData.is_author_like = !this.detailData.is_author_like\n\t\t\t},\n\t\t\t\n\t\t\t// 收藏事件\n\t\t\tasync likeTap(){\n\t\t\t\tconst likeState = this.isLike()\n\t\t\t\tuni.showLoading()\n\t\t\t  const res =\tawait indexModel.updateLike({\n\t\t\t\t\tarticle_id: this.detailData._id\n\t\t\t\t})\n\t\t\t\tuni.hideLoading()\n\t\t\t\tif(res.code === 200) {\n\t\t\t\t\tthis.changeLikeState()\n\t\t\t\t\tuni.$emit('update_article',{item:this.detailData,type:'index'})\n\t\t\t\t\twx.showToast({\n\t\t\t\t\t\ttitle: likeState? '取消收藏':'已收藏',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}else{\n\t\t\t\t\twx.showToast({\n\t\t\t\t\t\ttitle:'网络不好，稍后重试',\n\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 是否已收藏该文章\n\t\t\tisLike(){\n\t\t\t\treturn this.detailData.is_like\n\t\t\t},\n\t\t\t\n\t\t\t// 切换收藏状态\n\t\t\tchangeLikeState(){\n\t\t\t\tthis.detailData.is_like = !this.detailData.is_like\n\t\t\t},\n\t\t\t\n\t\t\t// 点赞事件\n\t\t\tasync thumbsUp(article_id){\n\t\t\t\tif(this.isThumbsUp()){\n\t\t\t\t\twx.showToast({\n\t\t\t\t\t\ttitle: '您已经点赞过',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tuni.showLoading()\n\t\t\t\tconst res = await indexModel.updateThumbsUp({\n\t\t\t\t\tarticle_id\n\t\t\t\t})\n\t\t\t\tuni.hideLoading()\n\t\t\t\tif(res.code === 200){\t\t\t\n\t\t\t\t\tthis.changeThumbsUp()\n\t\t\t\t\twx.showToast({\n\t\t\t\t\t\ttitle: res.msg,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 判断是否已经点赞过\n\t\t\tisThumbsUp(){\n\t\t\t\treturn this.detailData.is_thumbs_up\n\t\t\t},\n\t\t\t\n\t\t\t// 改变点赞状态\n\t\t\tchangeThumbsUp(){\n\t\t\t\tthis.detailData.is_thumbs_up = !this.detailData.is_thumbs_up\n\t\t\t\tthis.detailData.thumbs_up_count += 1\n\t\t\t},\n\t\t\t\n\t\t\t// 设置当前模式\n\t\t\tsetCurrentMode(mode){\n\t\t\t\tthis.currentMode = mode\n\t\t\t},\n\t\t\t\n\t\t\t// 打开评论区域\n\t\t\topenPopup(mode) {\n\t\t\t\tthis.setCurrentMode(mode)\n\t\t\t\tconst timestamp = Date.parse(new Date())\n\t\t\t\tthis.popupSwitch = timestamp\n\t\t\t},\n\t\t\t\n\t\t\t// 设置评论数据\n\t\t\tsetCommentsList(data) {\n\t\t\t\tthis.commentsList = data\n\t\t\t},\n\t\t\t\n\t\t\t// 设置预加载数据\n\t\t\tsetPreloadData(query){\n\t\t\t\tthis.detailData = this.analysisQuery(query)\n\t\t\t},\n\t\t\t\n\t\t\t// 设置详情数据\n\t\t\tsetDetailData(data){\n\t\t\t\tthis.detailData = data\n\t\t\t},\n\t\t\t\n\t\t\t// 跳转到评论页\n\t\t\tjumpToDetailComments(){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl:`../detail-comments/detail-comments?id=${this.detailData._id}`\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 获取文章详情\n\t\t\tasync getDetailData(){\n\t\t\t\tconst res = await indexModel.getDetail({\n\t\t\t\t\tarticle_id: this.detailData._id\n\t\t\t\t})\n\t\t\t\treturn res.data\n\t\t\t},\n\t\t\t\n\t\t\t// 获取文章评论\n\t\t\tasync getComments(){\n\t\t\t\tconst res = await indexModel.getComment({\n\t\t\t\t\tarticle_id: this.detailData._id\n\t\t\t\t})\n\t\t\t\treturn res.data\n\t\t\t},\n\t\t\t\n\t\t\t// 解析通过query传递的数据\n\t\t\tanalysisQuery(query){\n\t\t\t\treturn JSON.parse(query.params)\n\t\t\t},\n\t\t},\n\t\t\n\t\tasync onLoad(query){\n\t\t\tthis.setPreloadData(query)\n\t\t\tconst detailData = await this.getDetailData()\n\t\t\tthis.setDetailData(detailData)\n\t\t\tconst commentsListData = await this.getComments()\n\t\t\tthis.setCommentsList(commentsListData)\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.detail{\n\t\tpadding: 15px 0;\n\t\tpadding-bottom: 54px;\n\t\t.detail-title{\n\t\t\tpadding: 0 15px;\n\t\t\tfont-size: 18px;\n\t\t\tfont-weight: bold;\n\t\t\tcolor: #333;\n\t\t}\n\t\t.detail-header{\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tmargin-top: 10px;\n\t\t\tpadding: 0 15px;\n\t\t\t.detail-header__logo{\n\t\t\t\tflex-shrink: 0;\n\t\t\t\twidth: 40px;\n\t\t\t\theight: 40px;\n\t\t\t\tborder-radius: 50%;\n\t\t\t\toverflow: hidden;\n\t\t\t\timage{\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.detail-header__content{\n\t\t\t\twidth: 100%;\n\t\t\t\tpadding-left: 10px;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tfont-size: 12px;\n\t\t\t\t.detail-header__content-title{\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t}\n\t\t\t\t.detail-header__content-info{\n\t\t\t\t\tcolor: #999;\n\t\t\t\t\ttext{\n\t\t\t\t\t\tmargin-right: 10px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t.detail-header__button{\n\t\t\t\tflex-shrink: 0;\n\t\t\t\theight: 30px;\n\t\t\t\tfont-size: 12px;\n\t\t\t\tcolor: #fff;\n\t\t\t\tbackground-color: $mk-base-color;\n\t\t\t}\n\t\t}\n\t\t.detail-content{\n\t\t\tmargin-top: 20px;\n\t\t\tmin-height: 500px;\n\t\t\t.detail-html {\n\t\t\t\tpadding: 0 15px;\n\t\t\t}\n\t\t\t.detail-comment{\n\t\t\t\tmargin-top: 30px;\n\t\t\t\t.comment-title{\n\t\t\t\t\tpadding: 10px 15px;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tcolor: #666;\n\t\t\t\t\tborder-bottom: 1px solid #f5f5f5;\n\t\t\t\t}\n\t\t\t\t.comment-content{\n\t\t\t\t\tpadding: 0 15px;\n\t\t\t\t\tborder-top: 1px solid #eee;\n\t\t\t\t}\n\t\t\t\t.comment-no__content{\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tpadding: 10px 15px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\t\n\t\t.detail-bottom{\n\t\t\tposition: fixed;\n\t\t\tbottom: 0;\n\t\t\tleft: 0;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\twidth: 100%;\n\t\t\theight: 44px;\n\t\t\tborder-top: 1px solid #f5f5f5f;\n\t\t\tbackground-color: #fff;\n\t\t\tbox-sizing: border-box;\n\t\t\t.detail-bottom__input{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-left: 10px;\n\t\t\t\tpadding: 0 10px;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 30px;\n\t\t\t\tborder: 1px solid #ddd;\n\t\t\t\tborder-radius: 5px;\n\t\t\t\ttext{\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tcolor: #999;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.detail-bottom__icons{\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-shrink: 0;\n\t\t\t\tpadding: 0 10px;\n\t\t\t\t.detail-bottom__icons-box{\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\twidth: 44px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t.popup-wrap{\n\t\t\tbackground-color: #fff;\n\t\t\t\n\t\t\t.popup-header{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tcolor: #666;\n\t\t\t\tborder-bottom: 1px #F5F5F5 solid;\n\t\t\t\t.popup-header__item{\n\t\t\t\t\theight: 50px;\n\t\t\t\t\tline-height: 50px;\n\t\t\t\t\tpadding: 0 15px;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.popup-content{\n\t\t\t\twidth: 100%;\n\t\t\t\tpadding: 15px;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\t.popup-textarea{\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 200px;\n\t\t\t\t}\n\t\t\t\t.popup-count{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: flex-end;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tcolor: #999;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home-detail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home-detail.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1621828894603\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}